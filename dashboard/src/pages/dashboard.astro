---
import '../styles/dashboard.css';
import DbManage from '../components/dbManage.astro';
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Dashboard</title>

		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />

		<script src="../../public/frontend/navCol.js"></script>
		<script src="../../public/frontend/navDb.js"></script>
		<script src="../../public/frontend/navGen.js"></script>
		<script src="../../public/frontend/manageDb.js"></script>
		<script src="../../public/frontend/cardDb.js"></script>

		<script>
			// fetch and add dbs to window object

			window.dbs = [{ name: 'adminDB', collections: ['test', 'productionproductionproduction'] }, { name: 'adminDB', collections: ['test', 'productionproductionproduction'] }, { name: 'adminDB', collections: ['test', 'productionproductionproduction'] }, { name: 'adminDB', collections: ['test', 'productionproductionproduction'] }, { name: 'adminDB', collections: ['test', 'productionproductionproduction'] }, { name: 'adminDB', collections: ['test', 'productionproductionproduction'] }, { name: 'adminDB', collections: ['test', 'productionproductionproduction'] }, { name: 'adminDB', collections: ['test', 'productionproductionproduction'] }];
		</script>
	</head>
	<body>
		<nav id="main">
			<div>
				<h1>Mongost</h1>
				<div class="menu">
					<div><a>Databases</a><a>Commands center</a><a>Settings</a></div>
					<span class="material-symbols-outlined" onclick="var e = document.querySelector('.menu').querySelector('div'); e.classList.contains('active') ? e.classList.remove('active') : e.classList.add('active')">menu</span>
				</div>
			</div>
		</nav>
		<main>
			<nav>
				<div>
					<span class="material-symbols-outlined" onclick="((event) => {
						let e = event.target.parentElement.parentElement; 
						e.classList.contains('active') ? e.classList.remove('active') : e.classList.add('active')
					})(event)">close</span>
					
					<f-navgen />

					<div>
						<span class="material-symbols-outlined">add</span><p>New database</p>
					</div>
				</div>
			</nav>
			<div>
				<span onclick="((event) => {
					let e = document.querySelector('body > main > nav'); 
					e.classList.contains('active') ? e.classList.remove('active') : e.classList.add('active')
				})(event)"><span class="material-symbols-outlined">menu</span>Databases</span>
				<DbManage />
			</div>
		</main>
		<script>
			document.querySelector('main').onclick = (e) => {
				document.querySelector('.menu').querySelector('div').classList.remove('active')
			}
			window.onresize = (e) => {
				// hiding menu
				if (window.innerWidth > 700) 
					document.querySelector('.menu').querySelector('div').classList.remove('active')
			}
		</script>
	</body>
</html>
